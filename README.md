# ACE-JS

åŸºäº TypeScript å®ç°çš„ MCP (Model Context Protocol) æœåŠ¡å™¨ï¼Œç”¨äºä»£ç åº“ç´¢å¼•å’Œè¯­ä¹‰æœç´¢ã€‚

## ç‰¹æ€§

- âœ¨ **å¢é‡ç´¢å¼•** - ä»…ä¸Šä¼ æ–°å¢æˆ–ä¿®æ”¹çš„æ–‡ä»¶ï¼ŒåŸºäº SHA-256 å“ˆå¸Œæ£€æµ‹å˜æ›´
- ğŸ” **è¯­ä¹‰æœç´¢** - ä½¿ç”¨è‡ªç„¶è¯­è¨€æŸ¥è¯¢ä»£ç åº“
- ğŸš€ **è‡ªåŠ¨ç´¢å¼•** - æœç´¢å‰è‡ªåŠ¨æ‰§è¡Œå¢é‡ç´¢å¼•ï¼Œç¡®ä¿ç»“æœæœ€æ–°
- ğŸ“¦ **æ–‡ä»¶åˆ†å‰²** - è‡ªåŠ¨å¤„ç†å¤§æ–‡ä»¶ï¼ˆé»˜è®¤ 800 è¡Œ/ç‰‡æ®µï¼‰
- ğŸ” **é‡è¯•æœºåˆ¶** - å†…ç½®æŒ‡æ•°é€€é¿é‡è¯•ï¼Œå¤„ç†ç½‘ç»œæ³¢åŠ¨
- âš™ï¸ **çµæ´»é…ç½®** - æ”¯æŒé…ç½®æ–‡ä»¶ã€ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°

## å®‰è£…

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- npm æˆ– yarn æˆ– pnpm

### ä»æºç å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd ace-js

# å®‰è£…ä¾èµ–
npm install

# æ„å»ºé¡¹ç›®
npm run build

# å…¨å±€é“¾æ¥ï¼ˆå¯é€‰ï¼‰
npm link
```

## é…ç½®

### é…ç½®æ–¹å¼ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰

1. **å‘½ä»¤è¡Œå‚æ•°** - æœ€é«˜ä¼˜å…ˆçº§
2. **ç¯å¢ƒå˜é‡** - å‰ç¼€ `ACEMCP_`
3. **é…ç½®æ–‡ä»¶** - `~/.ace-js/settings.json`
4. **é»˜è®¤å€¼**

### å¿…éœ€é…ç½®

- `baseUrl`: ACE API æœåŠ¡å™¨åœ°å€
- `token`: API è®¤è¯ä»¤ç‰Œ

### å¯é€‰é…ç½®

- `batchSize`: æ‰¹é‡ä¸Šä¼ å¤§å°ï¼ˆé»˜è®¤: 10ï¼‰
- `maxLinesPerBlob`: æ¯ä¸ª blob æœ€å¤§è¡Œæ•°ï¼ˆé»˜è®¤: 800ï¼‰
- `textExtensions`: æ”¯æŒçš„æ–‡æœ¬æ–‡ä»¶æ‰©å±•å
- `excludePatterns`: æ’é™¤çš„æ–‡ä»¶/ç›®å½•æ¨¡å¼

### é…ç½®æ–‡ä»¶ç¤ºä¾‹

åˆ›å»º `~/.ace-js/settings.json`:

\`\`\`json
{
  "baseUrl": "https://api.augmentcode.com",
  "token": "your-api-token-here",
  "batchSize": 10,
  "maxLinesPerBlob": 800,
  "textExtensions": [".py", ".js", ".ts", ".md"],
  "excludePatterns": ["node_modules", ".git", "dist"]
}
\`\`\`

### ç¯å¢ƒå˜é‡

\`\`\`bash
export ACE_BASE_URL="https://api.augmentcode.com"
export ACE_TOKEN="your-api-token-here"
export ACE_BATCH_SIZE="10"
export ACE_MAX_LINES_PER_BLOB="800"
\`\`\`

## ä½¿ç”¨æ–¹æ³•

### ä½œä¸º MCP æœåŠ¡å™¨è¿è¡Œ

```bash
# ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°
ace-js --base-url https://api.augmentcode.com --token YOUR_TOKEN

# ä½¿ç”¨ç¯å¢ƒå˜é‡
ACE_BASE_URL=https://api.augmentcode.com ACE_TOKEN=YOUR_TOKEN ace-js

# å¼€å‘æ¨¡å¼
npm run dev -- --base-url https://api.augmentcode.com --token YOUR_TOKEN
```

### ä¸ Claude Desktop é›†æˆ

åœ¨ Claude Desktop çš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ ï¼š

**macOS/Linux**: `~/Library/Application Support/Claude/claude_desktop_config.json`

**Windows**: `%APPDATA%\Claude\claude_desktop_config.json`

\`\`\`json
{
  "mcpServers": {
    "ace-js": {
      "command": "node",
      "args": ["/path/to/ace-js/dist/index.js"],
      "env": {
        "ACE_BASE_URL": "https://api.augmentcode.com",
        "ACE_TOKEN": "your-api-token-here"
      }
    }
  }
}
\`\`\`

### å·¥å…·ä½¿ç”¨

æœåŠ¡å™¨æä¾›ä»¥ä¸‹ MCP å·¥å…·ï¼š

#### `search_context`

åœ¨ä»£ç åº“ä¸­æœç´¢ç›¸å…³ä»£ç ä¸Šä¸‹æ–‡ã€‚

**å‚æ•°**:
- `project_root_path` (string, å¿…éœ€): é¡¹ç›®æ ¹ç›®å½•çš„ç»å¯¹è·¯å¾„
- `query` (string, å¿…éœ€): æœç´¢æŸ¥è¯¢ï¼ˆè‡ªç„¶è¯­è¨€ï¼‰

**ç¤ºä¾‹**:
```json
{
  "project_root_path": "C:/workspace/myproject",
  "query": "ç”¨æˆ·è®¤è¯ç›¸å…³çš„ä»£ç "
}
```

## å·¥ä½œåŸç†

### å¢é‡ç´¢å¼•æµç¨‹

1. **æ–‡ä»¶æ”¶é›†** - é€’å½’æ‰«æé¡¹ç›®ç›®å½•ï¼Œæ ¹æ®æ‰©å±•åå’Œæ’é™¤æ¨¡å¼è¿‡æ»¤
2. **å“ˆå¸Œè®¡ç®—** - å¯¹æ¯ä¸ªæ–‡ä»¶è®¡ç®— SHA-256 å“ˆå¸Œï¼ˆè·¯å¾„ + å†…å®¹ï¼‰
3. **å˜æ›´æ£€æµ‹** - ä¸å†å²ç´¢å¼•æ¯”å¯¹ï¼Œè¯†åˆ«æ–°å¢/ä¿®æ”¹çš„æ–‡ä»¶
4. **æ–‡ä»¶åˆ†å‰²** - å¤§æ–‡ä»¶è‡ªåŠ¨åˆ†å‰²ä¸ºå¤šä¸ªç‰‡æ®µï¼ˆé»˜è®¤ 800 è¡Œ/ç‰‡æ®µï¼‰
5. **æ‰¹é‡ä¸Šä¼ ** - ä»…ä¸Šä¼ å˜æ›´çš„ blobï¼ˆé»˜è®¤ 10 ä¸ª/æ‰¹æ¬¡ï¼‰
6. **å…ƒæ•°æ®ä¿å­˜** - æ›´æ–° `~/.acemcp-js/data/projects.json`

### è¯­ä¹‰æœç´¢æµç¨‹

1. **è‡ªåŠ¨ç´¢å¼•** - æœç´¢å‰æ‰§è¡Œå¢é‡ç´¢å¼•ï¼Œç¡®ä¿æ•°æ®æœ€æ–°
2. **åŠ è½½ç´¢å¼•** - è¯»å–é¡¹ç›®çš„æ‰€æœ‰ blob å“ˆå¸Œ
3. **API è¯·æ±‚** - å‘é€æœç´¢è¯·æ±‚åˆ° ACE API
4. **ç»“æœè¿”å›** - è¿”å›æ ¼å¼åŒ–çš„ä»£ç ç‰‡æ®µï¼ˆåŒ…å«æ–‡ä»¶è·¯å¾„å’Œè¡Œå·ï¼‰

## å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm run dev

# æ„å»º
npm run build

# æ¸…ç†æ„å»ºäº§ç‰©
npm run clean
```

## é¡¹ç›®ç»“æ„

```
ace-js/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts              # MCP æœåŠ¡å™¨å…¥å£
â”‚   â”œâ”€â”€ config.ts             # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ manager.ts            # ç´¢å¼•ç®¡ç†å™¨ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
â”‚   â”œâ”€â”€ types.ts              # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ tools/
â”‚       â””â”€â”€ search-context.ts # æœç´¢å·¥å…·å®ç°
â”œâ”€â”€ dist/                     # æ„å»ºè¾“å‡ºç›®å½•
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

**Q: æç¤º"é…ç½®é”™è¯¯: baseUrl æ˜¯å¿…éœ€çš„"**

A: è¯·é€šè¿‡ä»¥ä¸‹ä»»ä¸€æ–¹å¼é…ç½®ï¼š
- å‘½ä»¤è¡Œå‚æ•°: `--base-url https://api.example.com`
- ç¯å¢ƒå˜é‡: `ACE_BASE_URL=https://api.example.com`
- é…ç½®æ–‡ä»¶: åœ¨ `~/.ace-js/settings.json` ä¸­è®¾ç½®

**Q: æœç´¢ç»“æœä¸ºç©º**

A: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. é¡¹ç›®è·¯å¾„æ˜¯å¦æ­£ç¡®
2. é¡¹ç›®ä¸­æ˜¯å¦åŒ…å«æ”¯æŒçš„æ–‡æœ¬æ–‡ä»¶ç±»å‹
3. æ’é™¤æ¨¡å¼æ˜¯å¦è¿‡æ»¤äº†ç›¸å…³æ–‡ä»¶
4. API token æ˜¯å¦æœ‰æ•ˆ

**Q: ä¸Šä¼ å¤±è´¥æˆ–è¶…æ—¶**

A: ç³»ç»Ÿå†…ç½®é‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰ï¼Œå¦‚æœä»ç„¶å¤±è´¥ï¼š
1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. éªŒè¯ API ç«¯ç‚¹æ˜¯å¦å¯è®¿é—®
3. å°è¯•å‡å°æ‰¹æ¬¡å¤§å°: `--batch-size 5`

## æŠ€æœ¯æ ˆ

- **TypeScript** - ç±»å‹å®‰å…¨çš„ JavaScript
- **@modelcontextprotocol/sdk** - MCP åè®®å®ç°
- **axios** - HTTP å®¢æˆ·ç«¯
- **Node.js** - è¿è¡Œæ—¶ç¯å¢ƒ

## ä¸ Python ç‰ˆæœ¬çš„å¯¹æ¯”

| ç‰¹æ€§ | Python ç‰ˆæœ¬ | TypeScript ç‰ˆæœ¬ |
|------|------------|----------------|
| æ ¸å¿ƒç´¢å¼•åŠŸèƒ½ | âœ… | âœ… |
| è¯­ä¹‰æœç´¢ | âœ… | âœ… |
| å¢é‡ç´¢å¼• | âœ… | âœ… |
| é…ç½®çƒ­åŠ è½½ | âœ… | âœ… |

## è®¸å¯è¯

Apache-2.0

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼